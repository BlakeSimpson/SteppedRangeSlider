(function(a){var b=function(b,c){var d=a(b);var e=this;var f={divider:" - "};a.extend(f,c||{});f.min=c.min||f.slider_values[0];f.max=c.max||f.slider_values[f.slider_values.length-1];f.values=c.values||[f.min,f.max];this.displaySliderValue=function(){var b=e.slider.slider("values",0);var c=e.slider.slider("values",1);if(f.display_area_class){a("."+f.display_area_class).text(e.getDisplayMask(b)+f.divider+e.getDisplayMask(c))}if(f.hidden_fields){a("#"+f.hidden_fields[0]).val(e.getRealValue(b));a("#"+f.hidden_fields[1]).val(e.getRealValue(c))}};this.findNearest=function(a){var b=null;var c=null;for(var d=0;d<f.slider_values.length;d++){if(f.include_left&&f.slider_values[d]<=a||f.include_right&&f.slider_values[d]>=a){var e=Math.abs(a-f.slider_values[d]);if(c==null||e<c){b=f.slider_values[d];c=e}}}return b};this.getRealValue=function(a){for(var b=0;b<f.slider_values.length;b++){if(f.slider_values[b]>=a){return f.true_values[b]}}return 0};this.getDisplayMask=function(a){for(var b=0;b<f.slider_values.length;b++){if(f.slider_values[b]>=a){if(typeof f.display_masks!="undefined"&&f.display_masks.length>0){return f.display_masks[b]||0}else if(typeof f.display_unit!="undefined"){var c=f.true_values[b];return f.display_unit_place&&f.display_unit_place=="after"?c+f.display_unit:f.display_unit+c}else{return e.getRealValue(a)}}}};this.initSlider=function(){e.slider=d.slider({range:true,min:f.min,max:f.max,values:f.values,slide:function(b,c){if(!f.include_left||!f.include_right){a.extend(f,{include_left:b.keyCode!=a.ui.keyCode.RIGHT});a.extend(f,{include_right:b.keyCode!=a.ui.keyCode.LEFT})}var d=e.findNearest(c.value);if(c.value==c.values[0]){e.slider.slider("values",0,d)}else{e.slider.slider("values",1,d)}e.displaySliderValue();return false}})}};a.fn.steppedRangeSlider=function(c){$options=c;return this.each(function(){var c=a(this);if(c.data("steppedrangeslider"))return;var d=new b(this,$options);c.data("steppedrangeslider",d);d.initSlider();d.displaySliderValue()})}})(jQuery)