(function(e){var t=function(t,n){var r=e(t);var i=this;var s={divider:" - "};e.extend(s,n||{});s.min=n.min||s.slider_values[0];s.max=n.max||s.slider_values[s.slider_values.length-1];s.value=n.value||s.min;this.displaySliderValue=function(){var t=i.slider.slider("option","value");if(s.display_area_class){e("."+s.display_area_class).text(i.getDisplayMask(t))}if(s.hidden_field){e("#"+s.hidden_field).val(i.getRealValue(t))}};this.findNearest=function(e){var t=null;var n=null;for(var r=0;r<s.slider_values.length;r++){if(s.include_left&&s.slider_values[r]<=e||s.include_right&&s.slider_values[r]>=e){var i=Math.abs(e-s.slider_values[r]);if(n==null||i<n){t=s.slider_values[r];n=i}}}return t};this.getRealValue=function(e){for(var t=0;t<s.slider_values.length;t++){if(s.slider_values[t]>=e){return s.true_values[t]}}return 0};this.getDisplayMask=function(e){for(var t=0;t<s.slider_values.length;t++){if(s.slider_values[t]>=e){if(typeof s.display_masks!="undefined"&&s.display_masks.length>0){return s.display_masks[t]||0}else if(typeof s.display_unit!="undefined"){var n=s.true_values[t];return s.display_unit_place&&s.display_unit_place=="after"?n+s.display_unit:s.display_unit+n}else{return i.getRealValue(e)}}}};this.initSlider=function(){i.slider=r.slider({range:false,min:s.min,max:s.max,value:s.value,slide:function(t,n){if(!s.include_left||!s.include_right){e.extend(s,{include_left:t.keyCode!=e.ui.keyCode.RIGHT});e.extend(s,{include_right:t.keyCode!=e.ui.keyCode.LEFT})}var r=i.findNearest(n.value);i.slider.slider("option","value",r);i.displaySliderValue();return false}})}};e.fn.steppedSingleSlider=function(n){$options=n;return this.each(function(){var n=e(this);if(n.data("steppedsingleslider"))return;var r=new t(this,$options);n.data("steppedsingleslider",r);r.initSlider();r.displaySliderValue()})}})(jQuery)
